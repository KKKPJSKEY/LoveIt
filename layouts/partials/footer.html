<footer class="footer">
    <div class="copyright">
        {{- /* Hugo and LoveIt */ -}}
        <div class="copyright-line">
            {{- printf (T "poweredBySome") `<a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a>` | safeHTML }} | {{ T "theme" }} - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="external nofollow noopener noreffer"><i class="far fa-heart fa-fw"></i> LoveIt</a>
        </div>

        <div class="copyright-line">
            {{- /* Copyright year */ -}}
            <i class="far fa-copyright fa-fw"></i>
            {{- with .Site.Params.footer.since -}}
                <span itemprop="copyrightYear">
                    {{- if lt . now.Year }}{{ . }} - {{ end }}{{ now.Year -}}
                </span>
            {{- else -}}
                <span itemprop="copyrightYear">{{ now.Year }}</span>
            {{- end -}}

            {{- /* Author */ -}}
            {{- with .Site.Author.name -}}
                <span class="author" itemprop="copyrightHolder">&nbsp;<a href="{{ $.Site.Author.link | default (relLangURL `/`) }}" target="_blank">{{ . }}</a></span>
            {{- end -}}

            {{- /* License */ -}}
            {{- with .Site.Params.footer.license -}}
                &nbsp;|&nbsp;<span class="license">{{ . | safeHTML }}</span>
            {{- end -}}

            {{- /* ICP */ -}}
            {{- with .Site.Params.footer.icp -}}
                <span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br"/>
                <span class="icp">{{ . | safeHTML }}</span>
            {{- end -}}
        </div>
    </div>
	<div class="app-refresh" id="app-refresh">
    <div class="app-refresh-wrap" onclick="location.reload()">
        <label>已更新最新版本</label>
        <span>点击刷新</span>
    </div>
</div>

<script>
    if ('serviceWorker' in navigator) {
        if (navigator.serviceWorker.controller) {
            navigator.serviceWorker.addEventListener('controllerchange', function() {
                showNotification();
            });
        }

        window.addEventListener('load', function() {
            navigator.serviceWorker.register('/sw.js');
        });
    }

    function showNotification() {
        document.querySelector('meta[name=theme-color]').content = '#000';
        document.getElementById('app-refresh').className += ' app-refresh-show';
    }
</script>

</footer>
